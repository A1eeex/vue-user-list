(function(){"use strict";var e={7974:function(e,t,s){var r=s(9242),n=s(3396),a=s(7139);const i={class:"header"},l={class:"filter"},o=["value"],u={key:0,class:"new-user"},d=(0,n._)("h3",{class:"new-user__title"},"Add New User",-1),c=(0,n._)("label",{for:"name",class:"new-user__label"},"Name:",-1),h=(0,n._)("label",{for:"email",class:"new-user__label"},"Email:",-1),p=(0,n._)("button",{type:"submit",class:"new-user__submit"},"Add User",-1),_={key:1},m={class:"pagination"},g=["disabled"],f=["disabled"];function w(e,t,s,w,U,b){const v=(0,n.up)("Loader"),y=(0,n.up)("UserList");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("header",i,[(0,n._)("div",l,[(0,n._)("input",{class:"filter__input",placeholder:"Search by name",type:"text",value:U.query,onInput:t[0]||(t[0]=(...e)=>b.handleInputChange&&b.handleInputChange(...e))},null,40,o)]),(0,n._)("button",{class:(0,a.C_)([{"close-user-btn":U.isShowNewUser},"show-user-btn"]),onClick:t[1]||(t[1]=(0,r.iM)(((...e)=>b.handleShowUser&&b.handleShowUser(...e)),["prevent"]))},(0,a.zw)(b.buttonText),3)]),U.isShowNewUser?((0,n.wg)(),(0,n.iD)("div",u,[d,(0,n._)("form",{class:"new-user__form",onSubmit:t[4]||(t[4]=(0,r.iM)(((...e)=>b.addUser&&b.addUser(...e)),["prevent"]))},[c,(0,n.wy)((0,n._)("input",{type:"text",id:"name",class:"new-user__input","onUpdate:modelValue":t[2]||(t[2]=e=>U.newUser.first_name=e),required:""},null,512),[[r.nr,U.newUser.first_name]]),h,(0,n.wy)((0,n._)("input",{type:"email",id:"email",class:"new-user__input","onUpdate:modelValue":t[3]||(t[3]=e=>U.newUser.email=e),required:""},null,512),[[r.nr,U.newUser.email]]),p],32)])):(0,n.kq)("",!0),U.isLoading?((0,n.wg)(),(0,n.iD)("h1",_,[(0,n.Wm)(v)])):((0,n.wg)(),(0,n.j4)(y,{key:2,users:b.paginatedUsers,onDeleteUser:b.handleDeleteUser,onCurrentUser:t[5]||(t[5]=e=>{b.handleCurrentUserEvent(e)})},null,8,["users","onDeleteUser"])),(0,n._)("div",m,[(0,n._)("button",{class:"pagination__button",onClick:t[6]||(t[6]=e=>b.handlePageChange("prev")),disabled:1===U.currentPage}," prev ",8,g),(0,n._)("span",null,(0,a.zw)(U.currentPage)+"/"+(0,a.zw)(U.totalPages),1),(0,n._)("button",{class:"pagination__button",onClick:t[7]||(t[7]=e=>b.handlePageChange("next")),disabled:U.currentPage===U.totalPages||U.currentPage*U.per_page>=b.filteredUsers.length}," next ",8,f)])],64)}const U={class:"user-list"},b=["onClick"],v=["src","alt"],y={class:"user-card__info"},D={class:"user-card__name"},k={class:"user-card__email"},C=["onClick"];function M(e,t,s,i,l,o){const u=(0,n.up)("CurrentUser"),d=(0,n.up)("Modal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("ul",U,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.users,(e=>((0,n.wg)(),(0,n.iD)("li",{class:"user-list__item",key:e.id},[(0,n._)("div",{onClick:t=>o.handleShowUser(e.id),class:"user-card"},[(0,n._)("img",{src:e.avatar,alt:e.first_name,class:"user-card__image"},null,8,v),(0,n._)("div",y,[(0,n._)("p",D,(0,a.zw)(e.first_name),1),(0,n._)("p",k,(0,a.zw)(e.email),1)])],8,b),(0,n._)("button",{class:"user-list__delete",onClick:(0,r.iM)((t=>o.deleteUser(e.id)),["prevent"])},"X",8,C)])))),128))]),l.isOpenModal?((0,n.wg)(),(0,n.j4)(d,{key:0,bottomButtons:!1,setIsOpenModal:o.setIsOpenModal,title:"User info",cancelBtnTitle:"Cancel",successBtnTitle:"Ok",onClickSuccess:o.handleSuccessClick},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{userData:l.currentUser,onUpdateUserData:t[0]||(t[0]=e=>{o.hendleTest(e)})},null,8,["userData"])])),_:1},8,["setIsOpenModal","onClickSuccess"])):(0,n.kq)("",!0)],64)}const S={key:0,class:"current-user"},q=["src"],P={class:"current-user__info"},O={class:"current-user__info"},E={key:0,class:"current-user__info"},I={key:1,class:"current-user__info"},z={class:"current-user__info"},T=["for"],x=["type","id","required","onUpdate:modelValue"],j=(0,n._)("button",{class:"current-user__edit-submit",type:"submit"},"Save Changes",-1);function L(e,t,s,i,l,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[l.isEdit?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",S,[(0,n._)("img",{class:"current-user__img",src:s.userData.avatar},null,8,q),(0,n._)("p",P," Fullname: "+(0,a.zw)(s.userData.first_name)+" "+(0,a.zw)(s.userData.last_name),1),(0,n._)("p",O,"Email: "+(0,a.zw)(s.userData.email),1),s.userData.number?((0,n.wg)(),(0,n.iD)("p",E," Nubmer: "+(0,a.zw)(s.userData.number),1)):(0,n.kq)("",!0),s.userData.address?((0,n.wg)(),(0,n.iD)("p",I," Address: "+(0,a.zw)(s.userData.address),1)):(0,n.kq)("",!0),(0,n._)("p",z,"id: "+(0,a.zw)(s.userData.id),1),(0,n._)("button",{class:"current-user__edit",onClick:t[0]||(t[0]=(0,r.iM)(((...e)=>o.handleEdit&&o.handleEdit(...e)),["prevent"]))},"edit")])),l.isEdit?((0,n.wg)(),(0,n.iD)("form",{key:1,class:"current-user__edit-form",onSubmit:t[1]||(t[1]=(0,r.iM)(((...e)=>o.saveChanges&&o.saveChanges(...e)),["prevent"]))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.formInputs,((e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:t},[(0,n._)("label",{class:"current-user__edit-label",for:e.id},(0,a.zw)(e.label)+":",9,T),(0,n.wy)((0,n._)("input",{class:"current-user__edit-input",type:e.type,id:e.id,required:e.required,"onUpdate:modelValue":t=>l.editedUserData[e.model]=t},null,8,x),[[r.YZ,l.editedUserData[e.model]]])],64)))),128)),j],32)):(0,n.kq)("",!0)],64)}var N=s(1076),B={name:"CurrentUser",emits:["updateUserData"],props:{userData:{type:Object,default:()=>({})}},data(){return{isEdit:!1,editedUserData:{...this.userData},formInputs:[{required:!0,id:"editFullName",label:"Name",type:"text",model:"first_name"},{required:!0,id:"editEmail",label:"Email",type:"email",model:"email"},{required:!1,id:"editTel",label:"Phone number",type:"tel",model:"number"},{required:!1,id:"editAddres",label:"Address",type:"text",model:"address"}]}},methods:{handleEdit(){this.isEdit=!this.isEdit},async saveChanges(){try{if(!this.userData||!this.userData.id)return void console.error("Invalid userData:",this.userData);const e=await N.Z.patch(`https://reqres.in/api/users/${this.userData.id}`,{...this.editedUserData,number:this.editedUserData.number,address:this.editedUserData.address});this.$emit("updateUserData",e.data),this.isEdit=!1}catch(e){console.error("Error updating user data:",e)}}}},Z=s(89);const A=(0,Z.Z)(B,[["render",L]]);var $=A;const Y={class:"modal_button_close__wraper"},F={class:"modal_title"},H={class:"modal_form"},V={key:0,class:"modal_buttons_wrapper"};function W(e,t,s,i,l,o){return(0,n.wg)(),(0,n.iD)("div",{class:"modal_background",onClick:t[4]||(t[4]=(...e)=>o.closeModal&&o.closeModal(...e))},[(0,n._)("div",{class:"modal_container",onClick:t[3]||(t[3]=(0,r.iM)((()=>{}),["stop"]))},[(0,n._)("div",Y,[(0,n._)("button",{class:"modal_button_close",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e))},"X")]),(0,n._)("h1",F,(0,a.zw)(s.title),1),(0,n._)("form",H,[(0,n.WI)(e.$slots,"default"),s.bottomButtons?((0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("button",{class:"modal_button_cancel",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))},(0,a.zw)(s.cancelBtnTitle),1),(0,n._)("button",{class:"modal_button_success",onClick:t[2]||(t[2]=(...e)=>s.onClickSuccess&&s.onClickSuccess(...e))},(0,a.zw)(s.successBtnTitle),1)])):(0,n.kq)("",!0)])])])}var K={name:"Modal",props:{setIsOpenModal:{type:Function,required:!0},title:{type:String,required:!0},successBtnTitle:{type:String,required:!0},cancelBtnTitle:{type:String,required:!0},onClickSuccess:{type:Function,required:!0},bottomButtons:{type:Boolean,default:!0}},methods:{closeModal(){this.setIsOpenModal(!1)}}};const X=(0,Z.Z)(K,[["render",W]]);var G=X,J={name:"UserList",emits:["currentUser"],components:{CurrentUser:$,Modal:G},props:{users:Array,onDeleteUser:Function},data(){return{query:"",isOpenModal:!1,currentUser:null,currentPage:1,totalPages:1}},methods:{setIsOpenModal(e){this.isOpenModal=e},setCurrentUser(e){this.currentUser=e},handleSuccessClick(e){e.preventDefault(),console.log("handleSuccessClick..."),this.setIsOpenModal(!1)},handleShowUser(e){this.setIsOpenModal(!0);const t=this.users.find((t=>t.id==e));this.setCurrentUser(t),console.log(this.currentUser)},deleteUser(e){this.onDeleteUser(e)},hendleTest(e){this.$emit("currentUser",e),this.currentUser={...this.currentUser,...e}}}};const Q=(0,Z.Z)(J,[["render",M]]);var R=Q;const ee={class:"Loader","data-cy":"loader"},te=(0,n._)("div",{class:"Loader__content"},null,-1),se=[te];function re(e,t,s,r,a,i){return(0,n.wg)(),(0,n.iD)("div",ee,se)}var ne={name:"Loader"};const ae=(0,Z.Z)(ne,[["render",re]]);var ie=ae,le={name:"App",components:{UserList:R,Loader:ie},data(){return{users:[],query:"",isOpenModal:!1,currentUser:null,currentPage:1,totalPages:1,isLoading:!0,per_page:6,errorMessage:"",isShowNewUser:!1,newUser:{first_name:"",email:""}}},computed:{filteredUsers(){const e=this.query.toLowerCase();return this.users.filter((t=>t.first_name.toLowerCase().includes(e)))},paginatedUsers(){const e=(this.currentPage-1)*this.per_page,t=e+this.per_page;return this.filteredUsers.slice(e,t)},buttonText(){return this.isShowNewUser?"Close Add New User":"Add new User"}},mounted(){this.fetchUsers()},methods:{handleShowUser(){this.isShowNewUser=!this.isShowNewUser},handleCurrentUserEvent(e){this.users=this.users.map((t=>{if(t.id==e.id){const s={...t,...e};return s}return t}))},async fetchUsers(){try{let e=1;do{const t=await N.Z.get(`https://reqres.in/api/users?page=${e}`);t.data.data.forEach((e=>{e.number=null,e.address=null})),this.users=this.users.concat(t.data.data),this.totalPages=t.data.total_pages,this.per_page=t.data.per_page,e++}while(e<=this.totalPages)}catch(e){console.error("Error:",e)}finally{this.isLoading=!1}},async addUser(){try{const e={first_name:this.newUser.first_name,email:this.newUser.email,avatar:"https://www.kindpng.com/picc/m/488-4888087_silhouette-user-person-user-silhouette-hd-png-download.png"},t=await N.Z.post("https://reqres.in/api/users",e),s=t.data;this.users.unshift(s),this.totalPages=Math.ceil(this.filteredUsers.length/this.per_page),this.newUser.first_name="",this.newUser.email=""}catch(e){console.error("Error added}:",e),this.errorMessage="Error added"}},async handleDeleteUser(e){try{await N.Z.delete(`https://reqres.in/api/users/${e}`),console.log(`User with ID ${e} deleted successfully.`),this.users=this.users.filter((t=>t.id!==e))}catch(t){this.errorMessage="Error deleted",console.error(`Error deleting user with ID ${e}:`,t)}},handleNewPage(e){this.currentPage=e},handleInputChange(e){this.query=e.target.value,this.currentPage=1},handlePageChange(e){"prev"===e&&this.currentPage>1?this.currentPage--:"next"===e&&this.currentPage<this.totalPages&&this.currentPage++}}};const oe=(0,Z.Z)(le,[["render",w]]);var ue=oe;(0,r.ri)(ue).mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,a){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],a=e[d][2];for(var l=!0,o=0;o<r.length;o++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[o])}))?r.splice(o--,1):(l=!1,a<i&&(i=a));if(l){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,i=r[0],l=r[1],o=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(o)var d=o(s)}for(t&&t(r);u<i.length;u++)a=i[u],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},r=self["webpackChunkmy_vue_project"]=self["webpackChunkmy_vue_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(7974)}));r=s.O(r)})();
//# sourceMappingURL=app.7d4ae60b.js.map